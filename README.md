
# Solar Energy Forecasting Pipeline

This repository contains a prototype data pipeline for forecasting solar energy production in the United States. It processes raw solar generation data, cleans it, performs exploratory analysis, and uses a Linear Regression model to predict future energy output. A summary of the analysis and forecast is also generated.

## Project Structure

```
solar-energy-forecast/
‚îÇ
‚îú‚îÄ‚îÄ ai_module.py
‚îú‚îÄ‚îÄ summary_module.py
‚îú‚îÄ‚îÄ main_pipeline.py
‚îú‚îÄ‚îÄ cleaned_solar_data.csv     ‚Üê Generated during preprocessing
‚îú‚îÄ‚îÄ forecast_next_year.csv     ‚Üê Generated by the forecasting model
‚îú‚îÄ‚îÄ weekly_summary.txt         ‚Üê Generated summary of analysis and forecast
‚îú‚îÄ‚îÄ README.md                  ‚Üê This file
‚îú‚îÄ‚îÄ Net Generation of Solar Energy U.csv  ‚Üê Original input data
‚îî‚îÄ‚îÄ solar_generation_trend.png ‚Üê Visualization of historical data
```

## Deliverables

This project addresses the following deliverables for Week 2 and Week 3 of the Rayfield Systems Technical Track:

### Week 2: Data Pipeline Design
- **Functioning data pipeline prototype:** `main_pipeline.py` orchestrates the data loading, cleaning, processing, and output generation.
- **Clear system flow diagram (CSV ‚Üí Processing ‚Üí Output):** Conceptualized in the pipeline structure and documented here.
    - **Input:** `Net Generation of Solar Energy U.csv` (raw data)
    - **Processing:** `preprocess_data` (cleaning, unit conversion, date formatting, handling negative values), `train_and_predict` (feature engineering, model training, forecasting)
    - **Output:** `cleaned_solar_data.csv`, `forecast_next_year.csv`, `weekly_summary.txt`, `solar_generation_trend.png`
- **Documentation of dataset choices, cleaning logic, and feature engineering:** Provided in this `README.md` and inline code comments.
    - **Dataset Selection:** Solar generation data for the United States, chosen for its relevance to clean energy and availability.
    - **Time Span and Granularity:** Monthly data from 2001-01-01 to 2025-04-01.
    - **Energy Workflow Support:** Supports forecasting future solar energy output, which can be crucial for grid management and resource planning.
    - **Cleaning Logic:**
        - Renamed 'All utility-scale solar : United States thousand megawatthours' to 'Generation_MWh'.
        - Converted 'Month' column to datetime objects.
        - Converted 'thousand megawatthours' to 'megawatthours' (multiplied by 1000).
        - Replaced any negative generation values with 0.
        - Sorted data by 'Month'.
    - **Feature Engineering:**
        - `Month_Num`: A numerical representation of months from the start of the dataset, used as the independent variable for the time series model.
- **Draft ideas for automation and AI/ML integration:**
    - **Automation:** The `main_pipeline.py` script can be scheduled to run periodically (e.g., monthly) to automatically update forecasts and summaries when new data becomes available.
    - **AI/ML Integration:**
        - **Forecasting:** Linear Regression is implemented for predicting future generation. This can be enhanced with more sophisticated time series models (e.g., ARIMA, Prophet, recurrent neural networks) for improved accuracy and handling of seasonality.
        - **Anomaly Detection:** Anomaly detection models (e.g., Isolation Forest, Z-score) could be integrated to flag unusual dips or spikes in solar generation, potentially indicating equipment issues or unusual weather patterns.
        - **Reporting/Summarization:** The mock summary generation can be replaced with a large language model (LLM) like GPT to generate more comprehensive and insightful reports based on the analyzed data and forecasts.

### Week 3: AI/ML Core Development
- **Working AI/ML scripts or notebooks:** `ai_module.py` contains the core AI/ML logic for training and prediction. `main_pipeline.py` orchestrates its use.
- **At least one useful visualization:** `solar_generation_trend.png` provides a visual representation of historical solar energy generation.
- **A natural-language summary (from GPT or mock):** `weekly_summary.txt` provides a mock natural-language summary of the data and forecast.
- **A Python module (ai_module.py) wrapping your logic into reusable functions:** `ai_module.py` and `summary_module.py` encapsulate the respective functionalities.

## How to Run

Assumptions:
 - You have successfully launched the Streamlit app (by running py -m streamlit run app.py in your terminal).
 - Your Net Generation of Solar Energy U.csv file (and the Python scripts: app.py, ai_module.py, summary_module.py) are all in the same project directory.

Step 1: Access the Web Application
 - After running py -m streamlit run app.py in your terminal, your default web browser should automatically open a new tab displaying your Streamlit application.
 - You can now view your Streamlit app in your browser.
  *Local URL: http://localhost:8501
  *Network URL: http://<your-ip-address>:8501
 - Copy the "Local URL" (usually http://localhost:8501) and paste it into your web browser's address bar.
 - You should now see the "AI-Driven Solar Energy Forecasting & Anomaly Detection" dashboard.

Step 2: Upload Your Energy Data
 - On the web application page, locate the section titled "1. Upload Your Energy Data".
 - Click the "Browse files" button (or "Choose File" depending on your browser).
 - A file explorer window will open. Navigate to the directory where you saved your project files (e.g., C:\Users\ksana\Downloads\Rayfield or your PyCharm project folder).
 - Select the file named Net Generation of Solar Energy U.csv and click "Open".
 - Once uploaded, the app will display a "Raw Data Preview:" showing the first few rows of your uploaded CSV file. This confirms the app has successfully received your data.

Step 3: Run the Analysis
 - After reviewing the raw data preview, locate the large "üöÄ Run Analysis" button on the web page.
 - Click this button to start the data processing, forecasting, anomaly detection, and summary generation.
 - The app will display an "Running analysis..." message, followed by spinners and success messages as each step of the pipeline completes. This process might take a few seconds depending on the size of your dataset and your computer's performance.

Step 4: Review the Analysis Results in the App
 - As the analysis progresses, the web application will dynamically update to show you the results:

Data Preprocessing:
 - You'll see a confirmation that "Data Preprocessed!" and a "Cleaned Data Preview:" showing the first few rows of your processed data.

AI-Powered Forecasting:
 - A message confirming "Forecast Generated!" and a "Next 12-Month Forecast Preview:" displaying the predicted solar generation for the upcoming year.

Anomaly Detection:
 - A section titled "Detected Anomalies:" will appear.
 - If any unusual data points are found, they will be listed in a table, showing the date, generation value, and anomaly score. If no anomalies are found, it will state that.
 - You'll also see an informational message about alerts_today.csv being saved for Zapier integration.

Visualizing Trends & Anomalies:
 - A chart titled "Net Generation of Solar Energy Over Time" will be displayed.
 - This plot shows your historical solar energy generation.
 - Crucially, if anomalies were detected, they will be highlighted as red dots on this chart, making them easy to spot visually.

AI-Generated Summary:
 - Finally, a section titled "AI-Generated Summary" will present a natural language summary of your data. This summary will include:
 - The latest available historical generation.
 - The average forecasted monthly generation for the next year.
 - The highest and lowest forecasted months and their corresponding generation values.

Step 5: Locate the Generated Output Files
 - While the app displays the results, it also saves them as files in your project directory (the same folder where your app.py and CSV file are located). You can access these files directly on your computer:
 - cleaned_solar_data.csv: This is your original data after being cleaned and preprocessed.
 - forecast_next_year.csv: This file contains the detailed 12-month forecast generated by the AI model.
 - weekly_summary.txt: This text file contains the same AI-generated summary that you saw in the web app.
 - alerts_today.csv: (Important for Zapier) If any anomalies were detected, this file will be created. It contains the dates and generation values of the detected anomalies. This file is designed to be used as a trigger for external automation tools like Zapier.
 - solar_generation_trend.png: This is an image file of the historical trend plot, including any highlighted anomalies, saved for easy sharing or reporting.

## Models and Metrics
- **Model Used:** Scikit-learn's `LinearRegression` for forecasting.
- **Inputs:** `Month_Num` (numerical representation of time).
- **Outputs:** `Predicted_Generation_MWh`.
- **Data Preprocessing:** Handled within `ai_module.py`'s `preprocess_data` function, including date conversion, unit conversion, and handling of negative values.

## Future Improvements
- Implement more advanced time series models (e.g., ARIMA, Prophet, seasonal decomposition models) for improved forecasting accuracy, especially to capture seasonality more effectively.
- Integrate anomaly detection to identify unusual generation patterns.
- Replace the mock summary with a call to a real LLM API (e.g., OpenAI GPT) for more dynamic and insightful reporting.
- Develop a simple web application (e.g., using Streamlit or Flask) to visualize the data, forecast, and summary interactively.
- Set up automated scheduling (e.g., using Cron, Airflow, or cloud-based schedulers) to run the pipeline regularly.
